version: '3.8'

services:
  # Node.js
  app:
    build: ./api3
    ports:
      - "8003:8003"
    environment:
      - AWS_REGION=us-east-1
      - AWS_ACCESS_KEY_ID=ASIAVYOMUIQSVKVYHOA2
      - AWS_SECRET_ACCESS_KEY=tDHRk6tOViA+CRXTPrRaNiZAmTJAD3wCjpG295Y0
      - AWS_SESSION_TOKEN=IQoJb3JpZ2luX2VjEBIaCXVzLXdlc3QtMiJHMEUCIQD9iwvkQYfGQ8YowoPYyUqRymAWaJWJcJVvvhwWR2YPHQIgVf0AvMBo9v8GSmrvMOK4d9IGRsSxmJYZ0ylWJRioTFcqnAIIaxABGgwzOTYxMDMwMDkzMTciDKFgAqo0tzUTnBRJSyr5AUKzaqpWD2TFeRtzQBqk2I3z9li3+O9mKydAdVD5jok+7rJ1wvxKPWyOkp53Lz6Pmbl2zDAW3gBq8q3LMWmsv3U3MkkKEPaTVPNfGMn/RM1Gf8xS2y0JH9Tezi25D1hN+mhd0E1Osmftfn2ysNzhyZ6MaEYzC6qqPgCSXKPRMmMRzXVMineKBNm5VObL6W8MQthXHeto8uROPYr2FfCQmNstjDMOFMEYmPTOt0mgbzk5hhO/bxAGHJ0lsTPEQ+U5E/U4yMyozigbwC34DxxGtc2CtUhOjjQI8rn3PCmLBilzYuWXDflU4XhAbAuvRk6+kfl5o33Uy6EFTTD25Zy4BjqdAUH/KCZmtMU3ASvTvsJdXT1tDabhqIyGi6DrLfCQ54REMHr1whnOVPyKFFXHyfMBFLG1mlFvQF1FkHIHeEfogOEipHufV+OIgaXa4gMEhc+wWKcRm/xJ4Euzpv7jf+4cSNh+RnxyhWurWoEKXDHuCKH/mDFZ5d+0C4yH9uRzLOB1kbPw27ygpOW8UhE/Z+KxSaM2Gu/RNsLz4ssJPw4=

      
    networks:
      - my-network

  orquestador:
    build: ./orquestador
    ports:
      - "8001:8001"
    networks:
      - my-network

  # FastAPI
  api1:
    build: ./api1
    ports:
      - "8000:8000"
    environment:
      - DATA_USER=postgres.gwtvzmsuunpikefnnzwn
      - DATA_PASSWORD=L2NFS60u4W7paoPE
      - HOST=aws-0-us-east-1.pooler.supabase.com
      - DB_PORT=5432
      - DATABASE_NAME=bd_1
    networks:
      - my-network

  # Spring Boot
  api2:
    build: ./api2
    ports:
      - "8002:8002"
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://aws-0-us-east-1.pooler.supabase.com:5432/bd_2
      - SPRING_DATASOURCE_USERNAME=postgres.gwtvzmsuunpikefnnzwn
      - SPRING_DATASOURCE_PASSWORD=L2NFS60u4W7paoPE
    networks:
      - my-network

networks:
  my-network:
    driver: bridge

