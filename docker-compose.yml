version: '3.8'

services:
  # Node.js
  app:
    build: ./api3
    ports:
      - "8003:8003"
    environment:
      - AWS_REGION=us-east-1
      - AWS_ACCESS_KEY_ID=ASIAVYOMUIQSRTV46P6L
      - AWS_SECRET_ACCESS_KEY=G+nQyfeqwM8CJ8+rbK3wr6pmit4OaNnIyAsKNn4e
      - AWS_SESSION_TOKEN=IQoJb3JpZ2luX2VjEE8aCXVzLXdlc3QtMiJHMEUCIQC7PIpgLZNoADtFA7eyizHxU498jjVwC3YAiO0V2axKWAIgOK5sMngGeUl1UjXJd6JT70b0IcVQLY7bjdT3MO6qmuUqpQIIqP//////////ARABGgwzOTYxMDMwMDkzMTciDINl4683rscCxdR2nir5ASU5QJ10YBHXTV6x4u191RxDOmSz5qk4q1KsT7iSMV7loIi/wgf5SK2eQDvmmJMDOPX7x/J8WqHQnU4Asde5buMpCPRQfkFIdzvtxNClwKpiUdJnGZ/9KU2XpgCE4bq7I8CV7xqEXVbda8idFZQ4E82reelFb2o7voehD4507nFot07UPirK9UHwS8nJkX/9z7oqvIuBq2qXWdop+1iVDQ40ChZ3AS+OR3CYaaRMScsSY1ExShauf2kL1lc/SMoEa1xFZjjKvjBcyRwuuY10CwkxWxYhYBbxInD/0HqEnAamMZcpv9fGiDeVA8OP8O671CCoPhG2gMCG3zCrnKq4BjqdAcl4E7ZTfqnhLBBi6YIzSOaI3IeNhu8HCd6AGNDcRQVswypLbOX54zkPFcL/mi6uqOWN7mno1khmXSjGZhlNtir10fGOhhVt+1HIe30j3Kd/rrhgvurkZIe8lhthbIkyzGtGByI9rG+0u+7bJnvDiX+lnLjJM6PBrlz1qPq447hGJjzAHwvF+XDJg3lYhwINWGikqSLiYhwIRjRjrL8=
      
    networks:
      - my-network

  orquestador:
    build: ./orquestador
    ports:
      - "8001:8001"
    networks:
      - my-network

  # FastAPI
  api1:
    build: ./api1
    ports:
      - "8000:8000"
    environment:
      - DATA_USER=postgres.gwtvzmsuunpikefnnzwn
      - DATA_PASSWORD=L2NFS60u4W7paoPE
      - HOST=aws-0-us-east-1.pooler.supabase.com
      - DB_PORT=5432
      - DATABASE_NAME=bd_1
    networks:
      - my-network

  # Spring Boot
  api2:
    build: ./api2
    ports:
      - "8002:8002"
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://aws-0-us-east-1.pooler.supabase.com:5432/bd_2
      - SPRING_DATASOURCE_USERNAME=postgres.gwtvzmsuunpikefnnzwn
      - SPRING_DATASOURCE_PASSWORD=L2NFS60u4W7paoPE
    networks:
      - my-network

networks:
  my-network:
    driver: bridge

